rules_version = '2';
service cloud.firestore {
match /databases/{database}/documents {


// anyone can CREATE an appointment (public form).
// Only admins (authenticated + present in /admins collection) can READ/DELETE.
match /appointments/{docId} {
allow create: if true;
allow read, update, delete: if request.auth != null
&& exists(/databases/$(database)/documents/admins/$(request.auth.uid));
}


// admins collection: read allowed only to that admin user (console will be used to create docs)
match /admins/{adminId} {
allow read: if request.auth != null && request.auth.uid == adminId;
allow write: if false; // create admin docs from Firebase Console only
}
}
}
